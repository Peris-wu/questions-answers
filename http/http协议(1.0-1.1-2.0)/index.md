## 什么是 http 协议

http 协议又称超文本传输协议，是一种以 TCP 协议为基础、使用明文传输的应用层协议。

## http1.0

客户端每个 http 请求都会建立一个 tcp 连接，当服务端向客户端发送一个 http 响应后就关闭 tcp 连接
如果说一个页面有几十个 http 请求，那就会建立过多的 tcp 连接，消耗资源。(短连接)

为了解决这个问题，客户端在发送 http 请求时，在 header 加入了 Connection：keep-alive(连接复用) 字段，告诉服务端处理完 http 请求时，不要关闭 tcp 连接，这就引发了其他的问题。
1：如果服务端 tcp 连接不关闭的话，那么如果多用户访问该服务端，那会导致服务端连接数被消耗殆尽
解决：为此服务端有一个 keep-alive timeout 的参数，过一段时间，该连接没有新的 http 进来，则会关闭连接。
2：如果服务端 tcp 连接不关闭的话，客户端如何知道服务端处理完毕 http 请求？
解决：服务端毁在 http 响应 header 中加入 content-length：xx 字段，如果客户端接收到的字节长度等于该字段的值就说明处理完毕了,但是这样做又引发了新的问题。即如果返回的动态的资源，那服务端很难计算这个 content-length 字节长度，即使能计算出来，也会造成耗时过长的问题。

## http1.1

1:tcp 的 connection:keep-alive(连接复用)变成了默认属性，服务端在处理完 http 请求后，也不会关闭 tcp 连接。(长连接)
2:引用了 chunk 机制，也就是在响应头中加入 tranfer-encoding:chunked 属性
3:加入了缓存处理(强缓存和协商缓存)
4:PiepeLine 机制

## http2.0
http2.0中引入了两个新的概念
1. 帧
   帧代表的是最小的数据单位
2. 流
   流也就是由多个帧组成的数据流

二进制分帧层
http2.0 是彻底的二进制协议，采用的是二进制格式来传输数据。（http1.1 采用的是文本格式来传输数据）
http2.0 把响应划分为两个帧，即 HEADERS Frame 和 Data Frame。也就是说一个 http 响应划分成了两个帧来传输，而且采用的是二进制传输

多路复用
在一条TCP连接通道上，可以同时传输多路信息
